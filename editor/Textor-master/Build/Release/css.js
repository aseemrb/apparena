var Textor;
(function(c){var a=function(){this._token=this._textReader=null};a.prototype.begin=function(a){this._textReader=a;this._tokenStack=[{type:this.readStylesheet,selector:0,bracket:0,literal:!1,keyword:!1,start:!0}];this._token=null};a.prototype.read=function(){this._state=null;this._token=this._tokenStack[this._tokenStack.length-1];return{style:this._token.type.apply(this),state:this._state}};a.prototype.readStylesheet=function(){if(this._textReader.skipWhitespaces()||this._textReader.skipLineTerminators())return"text";this._token.start&&
1===this._tokenStack.length&&(this._state="base",this._token.start=!1);if(this._textReader.match("{"))return this._token.start=!0,this._token.keyword?this.push({type:this.readStylesheet,selector:0,bracket:0,literal:!1,keyword:!1}):this.push({type:this.readBlock}),this._token.keyword=!1,"punctuation";if(this._textReader.match("}")){if(1<this._tokenStack.length)return this.pop(),"punctuation";this._state=null;return"error"}if(this._textReader.match("["))return this._token.selector++,this._token.literal=
!1,"punctuation";if(this._textReader.match("("))return this._token.bracket++,"punctuation";if(this._textReader.match("]"))return this._token.literal=!1,0<this._token.selector?(this._token.selector--,"punctuation"):"error";if(this._textReader.match(")"))return 0<this._token.bracket?(this._token.bracket--,"punctuation"):"error";if(this._textReader.match("="))return this._token.literal=!0,"punctuation";if(this._textReader.match(";"))return this._token.keyword=!1,"punctuation";if(this._textReader.match(":")||
this._textReader.match("#")||this._textReader.match(".")||this._textReader.match(",")||this._textReader.match("+")||this._textReader.match("*")||this._textReader.match("|")||this._textReader.match(">"))return"punctuation";if(this.matchComment())return"comment";if(this._textReader.match("@"))return this._token.keyword=!0,this.readWord(),"keyword";if(this.matchString())return"literal";if(0<this.readWord().length)return 0<this._token.bracket||0<this._token.selector&&this._token.literal?"literal":0<this._token.selector?
"attribute":"element";this._textReader.read();return"text"};a.prototype.readBlock=function(){if(this._textReader.skipWhitespaces()||this._textReader.skipLineTerminators())return"text";if(this._textReader.match("}"))return this.pop(),"punctuation";if(this.matchComment())return"comment";if(this._textReader.match(";"))return"punctuation";if(this._textReader.match(":"))return this.push({type:this.readExpression}),"punctuation";if(0<this.readWord().length)return"attribute";this._textReader.read();return"text"};
a.prototype.readExpression=function(){if(this._textReader.match(";"))return this.pop(),"punctuation";if(this._textReader.match(","))return this.pop(),this.push({type:this.readExpression}),"punctuation";if(this._textReader.match("}"))return this.pop(),this.pop(),"punctuation";if(this._textReader.match("(")||this._textReader.match(")"))return"punctuation";if(this.matchComment())return"comment";if(this.matchString())return"literal";if(this._textReader.skipWhitespaces()||this._textReader.match("url"))return"text";
this._textReader.read();return"literal"};a.prototype.readComment=function(){this.terminate("*/");return"comment"};a.prototype.readString=function(){this._textReader.match("\\")?this._textReader.read():this.terminate(this._token.quote);return"literal"};a.prototype.readXmlComment=function(){this.terminate(">");return"comment"};a.prototype.matchComment=function(){return this._textReader.match("/*")?(this.push({type:this.readComment}),!0):this._textReader.match("<!")?(this.push({type:this.readXmlComment}),
!0):!1};a.prototype.matchString=function(){var a=this._textReader.peek();return"'"===a||'"'===a?(this._textReader.read(),this.push({type:this.readString,quote:a}),!0):!1};a.prototype.readWord=function(){for(var a="",b;0<(b=this._textReader.peek()).length&&/[\w\-\#$_]/.test(b);)a+=b,this._textReader.read();return a};a.prototype.terminate=function(a){if(this._textReader.match(a))return this.pop(),!0;this._textReader.read();return!1};a.prototype.push=function(a){this._tokenStack.push(a)};a.prototype.pop=
function(){this._tokenStack.pop()};c.CssLanguage=a})(Textor||(Textor={}));
